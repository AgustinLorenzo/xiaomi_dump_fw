Date.now||(Date.now=function(){return(new Date).valueOf()}),window.console||(window.console={log:function(){}});var loadingCount=0,Helper={bdc:new Array((-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),62,(-1),(-1),(-1),63,52,53,54,55,56,57,58,59,60,61,(-1),(-1),(-1),(-1),(-1),(-1),(-1),0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,(-1),(-1),(-1),(-1),(-1),(-1),26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,(-1),(-1),(-1),(-1),(-1)),getSrc:function(e){var n=Helper.getCookie("loginToken"),t="http://miwifi.com/cgi-bin/luci/;stok="+n;return t+e},setCookie:function(e,n,t){var r=new Date;r.setTime(r.getTime()+24*t*60*60*1000),document.cookie=e+"="+escape(n)+";expires="+r.toGMTString()},getCookie:function(e){var n,t=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(n=document.cookie.match(t))?unescape(n[2]):null},Encrypt:{key:"a2ffa5c9be07488bbb04a3a47d3c5f6a",iv:"64175472480004614961023454661220",nonce:null,init:function(){var e=this.nonceCreat();return this.nonce=e,this.nonce},nonceCreat:function(){var e=0,n="",t=Math.floor((new Date).getTime()/1000),r=Math.floor(10000*Math.random());return[e,n,t,r].join("_")},oldPwd:function(e){return CryptoJS.SHA1(this.nonce+CryptoJS.SHA1(e+this.key).toString()).toString()},newPwd:function(e,n){var t=CryptoJS.SHA1(e+this.key).toString();t=CryptoJS.enc.Hex.parse(t).toString(),t=t.substr(0,32),t=CryptoJS.enc.Hex.parse(t);var r=CryptoJS.SHA1(n+this.key).toString(),o=CryptoJS.enc.Hex.parse(this.iv),i=CryptoJS.AES.encrypt(r,t,{iv:o,mode:CryptoJS.mode.CBC,padding:CryptoJS.pad.Pkcs7}).toString();return i}},removeCookie:function(e){var n=new Date;n.setTime(n.getTime()+-86400000);var t=Helper.getCookie(e);document.cookie=e+"="+t+"; expires="+n.toGMTString()},unicodeEncode:function(e){return escape(e).toLocaleLowerCase().replace(/%u/gi,"\\u")},unicodeDecode:function(e){return unescape(e.replace(/\\u/gi,"%u"))},utf8Decode:function(e){return e.replace(/(\\u)(\w{4}|\w{2})/gi,function(e,n,t){return String.fromCharCode(parseInt(t,16))})},utf8Encode:function(e){for(var n="",t="",r=0,o=e.length;r<o;r++){n=e.charCodeAt(r).toString(16),t+="\\u"+new Array(5-n.length).join("0")+n}return t},setCid:function(){var e=Helper.parseUrl(location.href).cid;localStorage.setItem("cid",e)},getCid:function(){return localStorage.getItem("cid")},goHref:function(e){var n=location.href.split("/");n[n.length-1]=e,window.location.href=n.join("/")+"?"+Helper.getUrlParam()},goHrefNoParam:function(e){var n=location.href.split("/");n[n.length-1]=goUrl,window.location.href=n.join("/")},reloadNoParam:function(){var e=window.location.href,n=e.indexOf("?");n!=-1&&(e=e.substr(0,n)),window.location.href=e},getIp:function(e){var n="http://api.miwifi.com/utils/location";Helper.loadJsonp(n,function(n){if(0!=n.code){return !1}var t=n.data.srcip;e(t)})},isIos:function(){var e=navigator.userAgent;return !!e.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/)},isIe:function(e){if(e){var n=document.createElement("b");return n.innerHTML="<!--[if IE "+e+"]><i></i><![endif]-->",1===n.getElementsByTagName("i").length}return !!(window.ActiveXObject||"ActiveXObject" in window)},isPc:function(){for(var e=navigator.userAgent,n=new Array("Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"),t=!0,r=0;r<n.length;r++){if(e.indexOf(n[r])>0){t=!1;break}}return t},isFirfox:function(){return navigator.userAgent.toUpperCase().indexOf("FIREFOX")!=-1},loadJs:function(e,n,t){t=t||{};var r=document.getElementsByTagName("head")[0]||document.documentElement,o=document.createElement("script"),i=!1;o.src=e,t.charset&&(o.charset=t.charset),"async" in t&&(o.async=t.async||""),o.onerror=o.onload=o.onreadystatechange=function(){i||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState||(i=!0,n&&n(),o.onerror=o.onload=o.onreadystatechange=null,o&&r.removeChild(o))},r.insertBefore(o,r.firstChild)},loadJsonp:function(){var e=1*new Date;return function(n,t,r){var o;r=r||{};var i="QWJsonp"+e++,a=r.callbackReplacer||/%callbackfun%/gi;window[i]=function(e){clearTimeout(o),t&&t(e),window[i]=null},a.test(n)?n=n.replace(a,i):n+=(/\?/.test(n)?"&":"?")+"callback="+i+"&cb="+i,Helper.loadJs(n,r.oncomplete,r),r.timeout&&(o=setTimeout(function(){window[i]=null,r.fail&&r.fail({message:"超时"})},r.timeout))}}(),jsonp:function(e,n,t){do{var r="jsonp"+Date.now()}while(window[r]);if(e+="-1"!=e.indexOf("?")?"&callback="+r:"?callback="+r,"object"==typeof t){var o=t.msg,i=t.loadingMsg;t=t.showAlertNo}$("#loading-wrap").length>0&&loadingShow(i),window[r]=function(e){var r=$("#loading-wrap").length>0;if(0!=e.error){return t||alertShow(o||e.msg||alertDefault),0==--loadingCount&&r&&loadingHide(),!1}if(e.result){var i=e.result}else{i=e}return"string"==typeof i&&(i=i.replace(/\u0022/g,'"'),i=JSON.parse(i)),i&&i.code&&0!=i.code?(i.code==-1&&(o="服务器超时，请稍后刷新再试"),t||alertShow(o||i.msg||alertDefault),0==--loadingCount&&r&&loadingHide(),!1):(0==--loadingCount&&r&&loadingHide(),void n(i))},loadingCount++;var a=document.createElement("script");a.src=e,document.body.appendChild(a)},parseParam:function(e,n){var t="";return e instanceof String||e instanceof Number||e instanceof Boolean?t+="&"+n+"="+encodeURIComponent(e):$.each(e,function(r){var o=null==n?r:n+(e instanceof Array?"["+r+"]":"."+r);t+="&"+Helper.parseParam(this,o)}),t.substr(1)},jsonp2:function(e,n){if(e){do{var t="jsonp"+Date.now()}while(window[t]);e+="-1"!=e.indexOf("?")?"&callback="+t+"&jp="+t:"?callback="+t+"&jp="+t,window[t]=function(e){n(e)};var r=document.createElement("script");r.src=e,document.body.appendChild(r)}},setSrc:function(e,n){var t=[];for(var r in n){t.push(r+"="+n[r])}return t=t.join("&"),e+"?token="+Helper.getToken()+"&"+t},setSrcRemote:function(e){var n="";if("string"==typeof e){var t=e}else{t=e.api,n=JSON.stringify(e.data)}return Helper.remoteCall+"?token="+Helper.getToken()+"&api="+t+"&data="+n},setSrcMiats:function(e){var n="";if("string"==typeof e){var t=e}else{t=e.api;for(var r in e.data){n+="&"+r+"="+e.data[r]}}return Helper.miats+t+"?token="+Helper.getToken()+n},getUrlToken:function(){var e=Helper.parseUrl(location.href).et;return e},getToken:function(){var e=Helper.getUrlToken(),n=Helper.getCookie("miwifi_safe_token");if(window.miwifi_safe_token){var t=window.miwifi_safe_token}else{e?t=e:n&&(t=n)}return t},getEventCode:function(){var e=Helper.getToken();if(e){var n=e.split(",")[1]}else{n=""}return n},getUrlParam:function(){var e=Helper.getCookie("miwifiParam");if(Helper.getUrlToken()){var n=window.location.href,t=n.indexOf("?");return n.substr(t+1)}return e?e:""},parseUrl:function(e){for(var n=e.indexOf("?"),t=e.substr(n+1),r=t.split("&"),o={},i=0,a=r.length;i<a;i++){var c=r[i].split("=");c.length>0&&(o[c[0]]=c[1])}return o},decodeBase:function(e){var n,t,r,o,i,a,c,l=new Array((-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),(-1),62,(-1),(-1),(-1),63,52,53,54,55,56,57,58,59,60,61,(-1),(-1),(-1),(-1),(-1),(-1),(-1),0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,(-1),(-1),(-1),(-1),(-1),(-1),26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,(-1),(-1),(-1),(-1),(-1));for(a=e.length,i=0,c="";i<a;){do{n=l[255&e.charCodeAt(i++)]}while(i<a&&n==-1);if(n==-1){break}do{t=l[255&e.charCodeAt(i++)]}while(i<a&&t==-1);if(t==-1){break}c+=String.fromCharCode(n<<2|(48&t)>>4);do{if(r=255&e.charCodeAt(i++),61==r){return c}r=l[r]}while(i<a&&r==-1);if(r==-1){break}c+=String.fromCharCode((15&t)<<4|(60&r)>>2);do{if(o=255&e.charCodeAt(i++),61==o){return c}o=l[o]}while(i<a&&o==-1);if(o==-1){break}c+=String.fromCharCode((3&r)<<6|o)}return c},tmpl:function(){var e="sArrCMX",n=e+'.push("',t={js:{tagG:"js",isBgn:1,isEnd:1,sBgn:'");',sEnd:";"+n},"if":{tagG:"if",isBgn:1,rlt:1,sBgn:'");if',sEnd:"{"+n},elseif:{tagG:"if",cond:1,rlt:1,sBgn:'");} else if',sEnd:"{"+n},"else":{tagG:"if",cond:1,rlt:2,sEnd:'");}else{'+n},"/if":{tagG:"if",isEnd:1,sEnd:'");}'+n},"for":{tagG:"for",isBgn:1,rlt:1,sBgn:'");for',sEnd:"{"+n},"/for":{tagG:"for",isEnd:1,sEnd:'");}'+n},"while":{tagG:"while",isBgn:1,rlt:1,sBgn:'");while',sEnd:"{"+n},"/while":{tagG:"while",isEnd:1,sEnd:'");}'+n}};return function(r,o){for(var i,a=-1,c=[],l=[[/\{strip\}([\s\S]*?)\{\/strip\}/g,function(e,n){return n.replace(/[\r\n]\s*\}/g," }").replace(/[\r\n]\s*/g,"")}],[/\\/g,"\\\\"],[/"/g,'\\"'],[/\r/g,"\\r"],[/\n/g,"\\n"],[/\{[\s\S]*?\S\}/g,function(e){e=e.substr(1,e.length-2);for(var n=0;n<s.length;n++){e=e.replace(s[n][0],s[n][1])}var r=e;/^(.\w+)\W/.test(r)&&(r=RegExp.$1);var o=t[r];if(o){if(o.isBgn&&(i=c[++a]={tagG:o.tagG,rlt:o.rlt}),o.isEnd){if(a<0){throw new Error("Unexpected Tag: "+e)}if(i=c[a--],i.tagG!=o.tagG){throw new Error("Unmatch Tags: "+i.tagG+"--"+r)}}else{if(!o.isBgn){if(a<0){throw new Error("Unexpected Tag:"+e)}if(i=c[a],i.tagG!=o.tagG){throw new Error("Unmatch Tags: "+i.tagG+"--"+r)}if(o.cond&&!(o.cond&i.rlt)){throw new Error("Unexpected Tag: "+r)}i.rlt=o.rlt}}return(o.sBgn||"")+e.substr(r.length)+(o.sEnd||"")}return'",('+e+'),"'}]],s=[[/\\n/g,"\n"],[/\\r/g,"\r"],[/\\"/g,'"'],[/\\\\/g,"\\"],[/\$(\w+)/g,'opts["$1"]'],[/print\(/g,e+".push("]],f=0;f<l.length;f++){r=r.replace(l[f][0],l[f][1])}if(a>=0){throw new Error("Lose end Tag: "+c[a].tagG)}r=r.replace(/##7b/g,"{").replace(/##7d/g,"}").replace(/##23/g,"#"),r="var "+e+"=[];"+n+r+'");return '+e+'.join("");';var d=new Function("opts",r);return arguments.length>1?d(o):d}}()};